OLIVA MODEL AI
├── app.py                   # Flask webhook (Telegram / Twilio)
├── system_prompt.txt        # Prompt maestro (Markdown)
├── .env                     # Credenciales y settings
│
├── db/
│   ├── models.py            # SQLAlchemy ORM / DDL
│   └── engine.py            # create_engine() ya configurado
│
├── core/
│   ├── functions.py         # handlers de negocio (agenda, pagos…)
│   ├── memory.py            # LangChain + Chroma
│   ├── customers.py         # CRUD clientes (usa engine.py)
│   ├── scheduler.py         # disponibilidad + citas (usa engine.py)
│   └── embeddings.py        # FAISS + OpenAI embeddings
│
└── utils/
    ├── gcalendar.py         # Google Calendar wrapper
    └── helpers_tg.py        # send(), tg(), generación de teclados



# Segunda estructura
OLIVA MODEL AI/
├── app.py                   # Flask webhook (Telegram / Twilio)
├── system_prompt.txt        # Prompt maestro (Markdown)
├── .env                     # Credenciales y settings (OpenAI, Firebase, SQL Azure)
│
├── db/                      # Todo lo relacionado a la base relacional
│   ├── engine.py            # create_engine() con conexión a SQL Azure
│   ├── models.py            # SQLAlchemy ORM: clientes, citas, personal, reviews…
│   └── session.py           # factory de sesión (scoped_session)
│
├── firebase/                # Capa de chat-history en Firestore
│   ├── client.py            # inicializa Firebase Admin SDK
│   └── history.py           # funciones CRUD / query para “chat_history”
│
├── core/                    # Lógica de negocio independiente de infra
│   ├── functions.py         # handlers de alto nivel (lista servicios, create_booking…)
│   ├── customers.py         # CRUD de clientes (usa db/session.py)
│   ├── scheduler.py         # lógica de disponibilidad y consulta de citas (usa db)
│   └── embeddings.py        # FAISS + creación de vectores OpenAI
│
├── memory/                  # LangChain + retrieval sobre Firestore
│   ├── memory.py            # ConversationBufferMemory + FirestoreVectorStore
│   └── namespace.txt        # (opcional) mapeo de colecciones “chat_history”
|
|__ scripts/
|    |
|    |__ import_servicios.py # Extraccion de datos de archivo csv
|
│
└── utils/
    ├── gcalendar.py         # wrapper de Google Calendar
    ├── tg_helpers.py        # send_message(), build_keyboard(), parse_callback…
    └── datetime_parser.py   # dateparser + reglas de normalización


# Tercera estructura
OLIVA_MODEL_AI/
│
├── alembic 
│   ├── env.py                          # configuración de Alembic
│   ├── script.py.mako                  # plantilla de migración
│   ├── __pycache__/                     # caché de Python
│   │     └── env.cpython-310.pyc
│   ├── versions/                        # migraciones generadas
│   │   └── 20231001_123456_create_tables.py  # ejemplo de migración
│   └── README.md                       # documentación de Alembic
│
├── app/                               # capa HTTP / mensajería
│   ├── __init__.py                    # create_app() + registrar blueprints
│   ├── webhook.py                     # Flask route: Telegram / Twilio
│   ├── admin_agente.py                   # endpoint solo-dueña (comandos SQL)
│   └── keyboards.py                   # builders de inline / reply buttons
│
│── data/
│   ├── servicios.csv            # servicios disponibles
│   ├── personal.csv             # personal disponible
│   ├── productos.csv            # productos disponibles
│
├── db/                                # SQL Azure
│   ├── engine.py                      # create_engine(pool_pre_ping=True,…)
│   ├── session.py                     # SessionLocal (scoped_session)
│   ├── models.py                      # Base, Cliente, Empleado, Disponibilidad_Personal, Servicio, Producto y Cita
│   ├── __init__.py                    # inicializa la base de datos
│   └── modificar tablas.py
│
├── firebase/
│   ├── __init__.py                    # inicializa Firebase Admin SDK
│   ├── client.py                      # Admin SDK inicial
│   └── history.py                     # CRUD “chat_history”
|   └── langchain_memory.py            # Memoria para LangChain (FirestoreChatHistory)
│
├── core/                              # lógica de negocio (no HTTP)
│   ├── __init__.py                    # inicializa core
│   ├── functions.py                   # function-calling dispatch
│   ├── customers.py                   # CRUD + validaciones cpmo email, teléfono 
│   ├── scheduler.py                   # reglas de agenda + disponibilidad
│   ├── embeddings.py                  # FAISS + OpenAI vectors
│   ├── admin_actions.py               # add_employee, mark_staff_unavailable…
|   └── message_predictor.py           # predict_message_type() para routing
│
├── memory/                            # LangChain
│   ├── __init__.py                    # inicializa FirestoreVectorStore
│   ├── memory.py                      # ConversationBufferMemory + Firestore
│   └── namespace.txt                  # (opcional) mapeo colección
│
├── models/                            # modelos de negocio
│   ├── modelo_intencion.pkl           # modelo de ML para intenciones
│   ├── modelo_sentimiento.pkl         # modelo de ML para sentimientos
│   ├── modelo_servicio.pkl            # modelo de ML para servicios
│
├── utils/
│   ├── gcalendar.py                   # wrapper Google Calendar
│   ├── helpers.py                     # send_message(), parse_callback() y generación de teclados
│   └── datetime_parser.py             # dateparser + reglas MX
│
├── scripts/                           # importaciones y utilidades CLI
│   ├── import_servicios.py            # carga CSV → servicios_oliva
│   ├── import_personal.py             # carga CSV → personal_oliva
│   ├── import_productos.py            # carga CSV → productos_oliva
│   ├── seed_db.py                     # crea tablas + datos demo
│   └── migrate.py                     # helpers Alembic opcionales
│
│── tests/                             # pytest (unit + integration)
│    └── __pycache__/                   # caché de Python
│    │    ├── test_db.cpython-310-pytest-8.4.1.pyc
│    │    └── test_scheduler.cpython-310-pytest-8.4.1.pyc
│    ├── gcalendarTest.py                     # pruebas de Google Calendar
│    ├── probar_memoria.py                # pruebas de memoria LangChain
│    ├── test_db.py                     # pruebas de base de datos
│    └── test_scheduler.py              # pruebas de lógica de agenda
│
│── README.md                          # documentación del proyecto
│── alembic.ini                        # configuración de Alembic
│── estructura.txt                     # este archivo
│── system_prompt.txt                  # prompt maestro (Markdown)
└── .env                                # credenciales y configuración (OpenAI, Firebase, SQL Azure 